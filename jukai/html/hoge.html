{% extends "html/header.html" %}
{% block main %}
<script type="text/javascript">
<!--

function load(sun,moon){
	var hoge=document.getElementById("fuga");
	var albox=document.getElementById("albox");
	hoge.src="/jukai/req/"+sun;
	albox.style.visibility="visible";
	for(var n=0;n<{{needs|length}};n++){	
		if (n!=moon) document.getElementById(n).style.color="#888888";
		else document.getElementById(n).style.color="#000000";
	}
}
function hidealbox(){
	var hoge=document.getElementById("albox");
	hoge.style.visibility="hidden";
	for(var n=0;n<{{needs|length}};n++){	
		document.getElementById(n).style.color="#555555";
	}
}
// -->
</script>
<div id="content">
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr>

		<td><h1>買出しリスト</h1>
			<h2>{% if update %}新着{{ length }}件</h2>{% else %} {% if popular %}人気順{{ length }}件</h2> {% else %}
		{% if reqs %}新着リクエスト</h2>{% else %}
		What's this?
		</h2>
		これは、渋谷教育学園幕張高等学校の物理部、及び付属中学の電気部の、買出しリストの電子化の試みです。
		いまだにアルファリリースですので、使用にたえませんし、中のデータもテストデータです。いつ消えるかは
		開発者次第です。<p>
		現在テストユーザと開発者を募集しています。特に絵が描ける人や文章が書ける人、それからpythonやJavascriptが書ける、もしくは
		やってみたい方大歓迎です。<br>
		userid:Testuser
		password:passwd
		でテストログインできます。
		<h2>使い方</h2>
		右上からログインします。
		眺めます。部品を追加したり、部品をリクエストしたりできます。リクエストするには右のRequestボタンをつかいます。
		<h2>実装</h2>
		DjangoをDBの操作やテンプレートの展開等につかっています。<td>{% endif %}  {% endif%} {% endif%} 
			<table>
			<thead><tr>
			<th scope="col">種類</th>
			<th scope="col">値段</th>
			<th scope="col">お店</th>
			<th scope="col">Properties </th>
			<th scope="col">今すぐに</th>
			<th scope="col">急いで</th>
			<th scope="col">そろそろ</th>
			<th scope="col">いつでも</th>
			<th scope="col">Sum</th>
			<th scope="col">Lastordered</th>
			<th scope="col"></th>
			<th scope="col"></th>
		</tr></thead>
	<tbody>
		{% if needs %}
		{% for n in needs %}<tr class="odd">
			<th scope="row" class="column1">
			{{ n.latest_part.name }}</th>
			<td>{{ n.latest_part.price }}</td>
			<td><a href={{ n.latest_part.url }}>{{ n.latest_part.shop}}</a></td>
			<td>{{ n.prop}}</td>
			<td>{{ n.Mlevneeds }}個</td>
			<td>{{ n.Alevneeds }}個</td>
			<td>{{ n.Blevneeds }}個</td>
			<td>{{ n.Clevneeds }}個</td>
			<td>{{ n.allneeds }}個</td>
			<td>{{ n.up_date }}</td>
			<td><a href=/jukai/{{n.latest_part.id}}>Edit</a></td>
			<td><span onClick="load('{{n.latest_part.id}}','{{forloop.counter0}}')" class="button1" id="{{forloop.counter0}}">Request</span></td>
		</tr>
		{% endfor %}
		{% else %}
		<p>I don't know anything about mechatronics.</p>
		{% endif %}
		</tbody>
		</table>
	</td>
<td valign="top" width="200">
	<h1>メニュー</h1>
	<a href="/jukai/add">部品を追加する</a><br>
	<a href="/jukai/new">最近注文があった順</a><br>
	<a href="/jukai/reqs">最近の注文</a><br>
	<a href="/jukai/pop">人気の部品</a><br>
	検索<br>
	{% if user.is_authenticated %}<br>
	{{ user.username }}<br>
	{% else %}<br>
	<a href="/django/login">ログイン</a><br>
	{% endif %}<br>
	<a href="/django/logout">ログアウト</a><br>
	<a href="http://iorivr.dyndns.org/django/jukai/admin">管理</a><br>
	<div id="albox"><div style="background-color:#333333" onClick="hidealbox()">×<br><iframe width="160" height="260" frameborder=0 scrolling=no id="fuga"></iframe></div></div>
</div>
</body>
{% endblock %}
